# üìã –ü–æ–ª–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è ITA_RENT_BOT

## üéØ –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

**ITA_RENT_BOT** - —ç—Ç–æ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –∏ –ø–æ–∏—Å–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –∞—Ä–µ–Ω–¥—ã –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ –≤ –ò—Ç–∞–ª–∏–∏ —Å —Å–∏—Å—Ç–µ–º–æ–π —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ Telegram.

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîç –ê–≥—Ä–µ–≥–∞—Ü–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π —Å –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∏—Ç–∞–ª—å—è–Ω—Å–∫–∏—Ö —Å–∞–π—Ç–æ–≤ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏
- üì± –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞
- üåê –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –∫–∞—Ä—Ç–∞–º–∏
- üîê –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- üíæ –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- üìä –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–ø–∏—Å–æ–∫ —Å —Ç–∞—Ä–∏—Ñ–Ω—ã–º–∏ –ø–ª–∞–Ω–∞–º–∏
- üó∫Ô∏è –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–∞—Ä—Ç—ã —Å –≥–µ–æ–ª–æ–∫–∞—Ü–∏–µ–π

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        ITA_RENT_BOT                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ   Frontend      ‚îÇ   API Server    ‚îÇ      External Services      ‚îÇ
‚îÇ   (React TS)    ‚îÇ   (FastAPI)     ‚îÇ                             ‚îÇ
‚îÇ                 ‚îÇ                 ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ  ‚îÇ    Telegram Bot API     ‚îÇ‚îÇ
‚îÇ ‚îÇ Web App     ‚îÇ‚óÑ‚îº‚ñ∫‚îÇ REST API    ‚îÇ ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ
‚îÇ ‚îÇ (Vite/React)‚îÇ ‚îÇ ‚îÇ (FastAPI)   ‚îÇ ‚îÇ                             ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ
‚îÇ                 ‚îÇ                 ‚îÇ  ‚îÇ     ScraperAPI          ‚îÇ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ  ‚îÇ  (Web Scraping Service) ‚îÇ‚îÇ
‚îÇ ‚îÇ Maps        ‚îÇ ‚îÇ ‚îÇ Parsers     ‚îÇ ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ
‚îÇ ‚îÇ (Leaflet)   ‚îÇ ‚îÇ ‚îÇ (Scrapers)  ‚îÇ ‚îÇ                             ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  ‚îÇ   Target Websites       ‚îÇ‚îÇ
                  ‚îÇ                 ‚îÇ  ‚îÇ ‚Ä¢ Idealista.it          ‚îÇ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  ‚îÇ ‚Ä¢ Immobiliare.it        ‚îÇ‚îÇ
‚îÇ   Data Layer    ‚îÇ  Bot Services   ‚îÇ  ‚îÇ ‚Ä¢ Subito.it (planned)   ‚îÇ‚îÇ
‚îÇ                 ‚îÇ                 ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ                             ‚îÇ
‚îÇ ‚îÇ PostgreSQL  ‚îÇ ‚îÇ ‚îÇ Telegram    ‚îÇ ‚îÇ                             ‚îÇ
‚îÇ ‚îÇ (Primary DB)‚îÇ ‚îÇ ‚îÇ Bot Service ‚îÇ ‚îÇ                             ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ                             ‚îÇ
‚îÇ                 ‚îÇ                 ‚îÇ                             ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ                             ‚îÇ
‚îÇ ‚îÇ Redis Cache ‚îÇ ‚îÇ ‚îÇ Notification‚îÇ ‚îÇ                             ‚îÇ
‚îÇ ‚îÇ (Optional)  ‚îÇ ‚îÇ ‚îÇ Dispatcher  ‚îÇ ‚îÇ                             ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Frontend   ‚îÇ  ‚îÇ   API Gateway‚îÇ  ‚îÇ  Auth Service‚îÇ  ‚îÇ User Service ‚îÇ
‚îÇ   Service    ‚îÇ‚óÑ‚ñ∫‚îÇ   (FastAPI)  ‚îÇ‚óÑ‚ñ∫‚îÇ   (JWT)      ‚îÇ‚óÑ‚ñ∫‚îÇ  (CRUD)      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                          ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                 ‚îÇ                 ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Scraping     ‚îÇ  ‚îÇ Notification ‚îÇ  ‚îÇ  Map Service ‚îÇ
‚îÇ Service      ‚îÇ  ‚îÇ   Service    ‚îÇ  ‚îÇ   (Geo)      ‚îÇ
‚îÇ              ‚îÇ  ‚îÇ (Telegram)   ‚îÇ  ‚îÇ              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ                 ‚îÇ                 ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                          ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                 ‚îÇ                 ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  PostgreSQL  ‚îÇ  ‚îÇ Redis Cache  ‚îÇ  ‚îÇ Message Queue‚îÇ
‚îÇ   Database   ‚îÇ  ‚îÇ   Service    ‚îÇ  ‚îÇ (RabbitMQ)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend (Python)

**–û—Å–Ω–æ–≤–Ω–æ–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫:**

- **FastAPI** 0.104+ - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π, –±—ã—Å—Ç—Ä—ã–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **Python** 3.11+ - —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- **Uvicorn** - ASGI —Å–µ—Ä–≤–µ—Ä –¥–ª—è production

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**

- **PostgreSQL** 15+ - –æ—Å–Ω–æ–≤–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **SQLAlchemy** 2.0+ - ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- **Alembic** - —Å–∏—Å—Ç–µ–º–∞ –º–∏–≥—Ä–∞—Ü–∏–π
- **Psycopg2** - –¥—Ä–∞–π–≤–µ—Ä PostgreSQL

**–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**

- **Redis** 7+ - –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Å–µ—Å—Å–∏–π
- **redis-py** - Python –∫–ª–∏–µ–Ω—Ç –¥–ª—è Redis

**–ü–∞—Ä—Å–∏–Ω–≥ –∏ —Å–∫—Ä–∞–ø–∏–Ω–≥:**

- **aiohttp** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ HTTP –∑–∞–ø—Ä–æ—Å—ã
- **BeautifulSoup4** - –ø–∞—Ä—Å–∏–Ω–≥ HTML
- **Selenium** 4+ - –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **ScraperAPI** - –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –æ–±—Ö–æ–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫

**Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**

- **python-telegram-bot** 20+ - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è Telegram Bot API
- **asyncio** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**

- **python-jose** - JWT —Ç–æ–∫–µ–Ω—ã
- **passlib** - —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- **python-multipart** - –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–æ—Ä–º
- **cryptography** - –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏

**–£—Ç–∏–ª–∏—Ç—ã:**

- **Pydantic** 2.0+ - –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **python-dotenv** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **pytest** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **black** + **flake8** - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ª–∏–Ω—Ç–∏–Ω–≥ –∫–æ–¥–∞

### Frontend (TypeScript/React)

**–û—Å–Ω–æ–≤–Ω–æ–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫:**

- **React** 18+ - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è UI
- **TypeScript** 5+ - —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JavaScript
- **Vite** 5+ - –±—ã—Å—Ç—Ä—ã–π —Å–±–æ—Ä—â–∏–∫ –∏ dev —Å–µ—Ä–≤–µ—Ä

**–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**

- **React Router** 6+ - –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è SPA
- **Zustand** 4+ - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º (–ª–µ–≥—á–µ —á–µ–º Redux)

**UI –∏ —Å—Ç–∏–ª–∏:**

- **Sass/SCSS** - –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä CSS
- **CSS Modules** - –ª–æ–∫–∞–ª—å–Ω–∞—è –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏ —Å—Ç–∏–ª–µ–π
- **Leaflet** + **React-Leaflet** - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–∞—Ä—Ç—ã
- **Material Icons** - –∏–∫–æ–Ω–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**HTTP –∏ —É—Ç–∏–ª–∏—Ç—ã:**

- **Axios** - HTTP –∫–ª–∏–µ–Ω—Ç
- **date-fns** - —Ä–∞–±–æ—Ç–∞ —Å –¥–∞—Ç–∞–º–∏
- **react-hook-form** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:**

- **ESLint** + **Prettier** - –ª–∏–Ω—Ç–∏–Ω–≥ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **@types/\*** - —Ç–∏–ø—ã –¥–ª—è TypeScript
- **Vitest** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ Jest)

### DevOps –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

**–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è:**

- **Docker** 24+ - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- **Docker Compose** - –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**–î–µ–ø–ª–æ–π –∏ —Ö–æ—Å—Ç–∏–Ω–≥:**

- **Vercel** - –¥–µ–ø–ª–æ–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **Railway** / **Render** / **DigitalOcean** - –¥–µ–ø–ª–æ–π –±—ç–∫–µ–Ω–¥–∞
- **PostgreSQL** - —É–ø—Ä–∞–≤–ª—è–µ–º–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –æ–±–ª–∞–∫–µ
- **Redis Cloud** - —É–ø—Ä–∞–≤–ª—è–µ–º—ã–π Redis

**CI/CD (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**

- **GitHub Actions** - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –¥–µ–ø–ª–æ—è
- **Pre-commit hooks** - –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–¥–ª—è production):**

- **Sentry** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
- **Grafana** + **Prometheus** - –º–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **Loguru** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
ITA_RENT_BOT/
‚îú‚îÄ‚îÄ üìÅ backend/                       # –í–µ—Å—å –±—ç–∫–µ–Ω–¥ –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ apps/                         # –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –±—ç–∫–µ–Ω–¥–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/                      # –û—Å–Ω–æ–≤–Ω–æ–µ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ scraper/                  # –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –ø–∞—Ä—Å–∏–Ω–≥–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ telegram-bot/             # Telegram –±–æ—Ç
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ notification-worker/      # –í–æ—Ä–∫–µ—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ geo-service/              # –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ shared/                       # –û–±—â–∏–µ –±—ç–∫–µ–Ω–¥ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database/                 # –û–±—â–∏–µ –º–æ–¥–µ–ª–∏ –∏ —É—Ç–∏–ª–∏—Ç—ã –ë–î
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/                     # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cache/                    # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ messaging/                # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ monitoring/               # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils/                    # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ scripts/                      # –ë—ç–∫–µ–Ω–¥ —Å–∫—Ä–∏–ø—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database/                 # –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è –ë–î
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ scraping/                 # –°–∫—Ä–∏–ø—Ç—ã –ø–∞—Ä—Å–∏–Ω–≥–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ deployment/               # –°–∫—Ä–∏–ø—Ç—ã –¥–µ–ø–ª–æ—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ monitoring/               # –°–∫—Ä–∏–ø—Ç—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
‚îÇ   ‚îî‚îÄ‚îÄ tests/                        # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ üìÅ frontend/                      # –í–µ—Å—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ apps/                         # –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ web/                      # –û—Å–Ω–æ–≤–Ω–æ–µ React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin/                    # –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ landing/                  # –õ–µ–Ω–¥–∏–Ω–≥ —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îî‚îÄ‚îÄ packages/                     # –û–±—â–∏–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–∞–∫–µ—Ç—ã
‚îÇ       ‚îú‚îÄ‚îÄ ui/                       # UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ utils/                    # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
‚îÇ       ‚îî‚îÄ‚îÄ config/                   # –û–±—â–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ üìÅ shared/                        # –û–±—â–∏–µ –ø–∞–∫–µ—Ç—ã –¥–ª—è –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ types/                        # –û–±—â–∏–µ TypeScript/Python —Ç–∏–ø—ã
‚îÇ   ‚îú‚îÄ‚îÄ schemas/                      # –û–±—â–∏–µ —Å—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ constants/                    # –û–±—â–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
‚îú‚îÄ‚îÄ üìÅ infrastructure/                # –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞–∫ –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ docker/                       # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ kubernetes/                   # Kubernetes –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ terraform/                    # Terraform –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ monitoring/                   # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îú‚îÄ‚îÄ üìÅ tools/                         # –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ scripts/                      # –°–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ generators/                   # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –∫–æ–¥–∞
‚îÇ   ‚îî‚îÄ‚îÄ cli/                          # CLI –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ üìÅ docs/                          # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ api/                          # API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ architecture/                 # –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ guides/                       # –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞
‚îÇ   ‚îú‚îÄ‚îÄ specs/                        # –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ assets/                       # –î–∏–∞–≥—Ä–∞–º–º—ã –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ üìÅ data/                          # –î–∞–Ω–Ω—ã–µ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ fixtures/                     # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îú‚îÄ‚îÄ migrations/                   # –ú–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ seeds/                        # –ù–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îî‚îÄ‚îÄ backups/                      # –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏
‚îú‚îÄ‚îÄ üìÅ .github/                       # GitHub –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ üìÅ .vscode/                       # VS Code –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îú‚îÄ‚îÄ üìÅ logs/                          # –õ–æ–≥–∏ (–Ω–µ –≤ git)
‚îî‚îÄ‚îÄ üìÅ tmp/                           # –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (–Ω–µ –≤ git)              # –û—Å–Ω–æ–≤–Ω–æ–π README
```

## üóÑÔ∏è –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏

```python
# User - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∏—Å—Ç–µ–º—ã
class User(Base):
    id: int (PK)
    email: str (unique)
    hashed_password: str
    first_name: str
    last_name: str (optional)
    is_active: bool = True
    subscription_type: str = "free"  # free, premium_monthly, premium_annual
    telegram_chat_id: int (optional, unique)
    telegram_user_id: int (optional, unique)
    google_id: str (optional, unique)
    created_at: datetime
    updated_at: datetime

    # Relationships
    filters: List["Filter"] = relationship(back_populates="user")
    notifications: List["Notification"] = relationship(back_populates="user")

# Listing - –û–±—ä—è–≤–ª–µ–Ω–∏–µ –æ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏
class Listing(Base):
    id: int (PK)
    external_id: str (unique)  # ID –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–µ
    source: str  # idealista, immobiliare, subito
    title: str
    description: text (optional)
    price: float
    price_currency: str = "EUR"
    property_type: str  # apartment, house, room, studio
    rooms: int (optional)
    bedrooms: int (optional)
    bathrooms: int (optional)
    area: float (optional)  # –ø–ª–æ—â–∞–¥—å –≤ –º¬≤
    floor: int (optional)
    total_floors: int (optional)
    furnished: bool (optional)
    pets_allowed: bool (optional)

    # –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è
    address: str
    city: str
    district: str (optional)
    latitude: float (optional)
    longitude: float (optional)

    # –ú–µ–¥–∏–∞
    images: JSON  # —Å–ø–∏—Å–æ–∫ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    virtual_tour_url: str (optional)

    # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
    url: str  # —Å—Å—ã–ª–∫–∞ –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫
    is_active: bool = True
    scraped_at: datetime
    created_at: datetime
    updated_at: datetime

    # –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
    __table_args__ = (
        Index('idx_listing_city_price', 'city', 'price'),
        Index('idx_listing_rooms_area', 'rooms', 'area'),
        Index('idx_listing_coordinates', 'latitude', 'longitude'),
        Index('idx_listing_source_active', 'source', 'is_active'),
    )

# Filter - –§–∏–ª—å—Ç—Ä –ø–æ–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
class Filter(Base):
    id: int (PK)
    user_id: int (FK -> User.id)
    name: str  # –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

    # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞
    city: str (optional)
    min_price: float (optional)
    max_price: float (optional)
    property_type: str (optional)
    min_rooms: int (optional)
    max_rooms: int (optional)
    min_area: float (optional)
    max_area: float (optional)
    furnished: bool (optional)
    pets_allowed: bool (optional)

    # –ì–µ–æ—Ñ–∏–ª—å—Ç—Ä—ã
    latitude: float (optional)
    longitude: float (optional)
    radius_km: float (optional)  # —Ä–∞–¥–∏—É—Å –ø–æ–∏—Å–∫–∞

    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
    is_active: bool = True
    notification_enabled: bool = True
    last_notification_sent: datetime (optional)
    notification_frequency_hours: int = 24  # —á–∞—Å—Ç–æ—Ç–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

    created_at: datetime
    updated_at: datetime

    # Relationships
    user: "User" = relationship(back_populates="filters")
    notifications: List["Notification"] = relationship(back_populates="filter")

# Notification - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
class Notification(Base):
    id: int (PK)
    user_id: int (FK -> User.id)
    filter_id: int (FK -> Filter.id)
    listing_id: int (FK -> Listing.id)

    notification_type: str = "new_listing"  # new_listing, price_change
    status: str = "pending"  # pending, sent, failed
    sent_at: datetime (optional)
    error_message: str (optional)

    created_at: datetime

    # Relationships
    user: "User" = relationship(back_populates="notifications")
    filter: "Filter" = relationship(back_populates="notifications")
    listing: "Listing" = relationship()

# Subscription - –ü–æ–¥–ø–∏—Å–∫–∞ –∏ –ª–∏–º–∏—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
class Subscription(Base):
    id: int (PK)
    user_id: int (FK -> User.id, unique)
    plan_type: str  # free, premium_monthly, premium_annual
    status: str = "active"  # active, cancelled, expired

    # –õ–∏–º–∏—Ç—ã
    max_filters: int
    max_notifications_per_day: int
    notification_interval_hours: int

    # –î–∞—Ç—ã
    started_at: datetime
    expires_at: datetime (optional)
    cancelled_at: datetime (optional)

    created_at: datetime
    updated_at: datetime

    # Relationships
    user: "User" = relationship()
```

### –°–≤—è–∑–∏ –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏

```
User (1) -----> (N) Filter
User (1) -----> (N) Notification
User (1) -----> (1) Subscription

Filter (1) -----> (N) Notification
Listing (1) -----> (N) Notification

Listing (N) <----> (N) User (—á–µ—Ä–µ–∑ Notification)
```

## üîß API —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

```python
# –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
POST   /api/v1/auth/register          # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
POST   /api/v1/auth/login             # –í—Ö–æ–¥ –ø–æ email/password
POST   /api/v1/auth/telegram          # –í—Ö–æ–¥ —á–µ—Ä–µ–∑ Telegram
POST   /api/v1/auth/google            # –í—Ö–æ–¥ —á–µ—Ä–µ–∑ Google
POST   /api/v1/auth/refresh           # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
POST   /api/v1/auth/logout            # –í—ã—Ö–æ–¥
POST   /api/v1/auth/link-telegram     # –ü—Ä–∏–≤—è–∑–∫–∞ Telegram –∫ –∞–∫–∫–∞—É–Ω—Ç—É

# –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
GET    /api/v1/users/me               # –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
PUT    /api/v1/users/me               # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
DELETE /api/v1/users/me               # –£–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞
GET    /api/v1/users/subscription     # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–ø–∏—Å–∫–µ

# –û–±—ä—è–≤–ª–µ–Ω–∏—è
GET    /api/v1/listings               # –ü–æ–∏—Å–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
GET    /api/v1/listings/{id}          # –î–µ—Ç–∞–ª–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
GET    /api/v1/listings/suggestions   # –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è

# –§–∏–ª—å—Ç—Ä—ã
GET    /api/v1/filters                # –°–ø–∏—Å–æ–∫ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
POST   /api/v1/filters                # –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞
GET    /api/v1/filters/{id}           # –î–µ—Ç–∞–ª–∏ —Ñ–∏–ª—å—Ç—Ä–∞
PUT    /api/v1/filters/{id}           # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞
DELETE /api/v1/filters/{id}           # –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞
POST   /api/v1/filters/{id}/test      # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞

# –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
GET    /api/v1/notifications          # –ò—Å—Ç–æ—Ä–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
POST   /api/v1/notifications/subscribe # –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
POST   /api/v1/notifications/confirm  # –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
PUT    /api/v1/notifications/{id}/read # –û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ

# –ü–∞—Ä—Å–∏–Ω–≥ (–∞–¥–º–∏–Ω)
POST   /api/v1/scraping/run           # –ó–∞–ø—É—Å–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞
GET    /api/v1/scraping/status        # –°—Ç–∞—Ç—É—Å –ø–∞—Ä—Å–∏–Ω–≥–∞
GET    /api/v1/scraping/stats         # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞
POST   /api/v1/scraping/cache/clear   # –û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞

# –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è
GET    /api/v1/geo/cities             # –°–ø–∏—Å–æ–∫ –≥–æ—Ä–æ–¥–æ–≤
GET    /api/v1/geo/districts          # –†–∞–π–æ–Ω—ã –≥–æ—Ä–æ–¥–∞
POST   /api/v1/geo/geocode            # –ì–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–∞
POST   /api/v1/geo/reverse-geocode    # –û–±—Ä–∞—Ç–Ω–æ–µ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ

# –°–∏—Å—Ç–µ–º–∞
GET    /api/v1/health                 # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
GET    /api/v1/metrics                # –ú–µ—Ç—Ä–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã
```

### –°—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö (Pydantic)

```python
# –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
class UserCreate(BaseModel):
    email: EmailStr
    password: str
    first_name: str
    last_name: str = None

class UserUpdate(BaseModel):
    first_name: str = None
    last_name: str = None
    subscription_type: str = None

class UserResponse(BaseModel):
    id: int
    email: str
    first_name: str
    last_name: str = None
    subscription_type: str
    is_active: bool
    created_at: datetime

# –û–±—ä—è–≤–ª–µ–Ω–∏–µ
class ListingSearch(BaseModel):
    city: str = None
    min_price: float = None
    max_price: float = None
    property_type: str = None
    min_rooms: int = None
    max_rooms: int = None
    min_area: float = None
    max_area: float = None
    furnished: bool = None
    pets_allowed: bool = None
    latitude: float = None
    longitude: float = None
    radius_km: float = None
    page: int = 1
    limit: int = 50

class ListingResponse(BaseModel):
    id: int
    source: str
    title: str
    price: float
    property_type: str
    rooms: int = None
    area: float = None
    address: str
    city: str
    images: List[str]
    url: str
    latitude: float = None
    longitude: float = None
    created_at: datetime

# –§–∏–ª—å—Ç—Ä
class FilterCreate(BaseModel):
    name: str
    city: str = None
    min_price: float = None
    max_price: float = None
    property_type: str = None
    min_rooms: int = None
    max_rooms: int = None
    notification_enabled: bool = True
    notification_frequency_hours: int = 24

class FilterResponse(BaseModel):
    id: int
    name: str
    city: str = None
    min_price: float = None
    max_price: float = None
    property_type: str = None
    min_rooms: int = None
    max_rooms: int = None
    is_active: bool
    notification_enabled: bool
    created_at: datetime
```

## üîê –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

1. **Email + Password** - –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
2. **Telegram Login Widget** - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram
3. **Google OAuth** - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Google
4. **–°–≤—è–∑—ã–≤–∞–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–æ–≤** - –æ–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–±–æ–≤ –≤—Ö–æ–¥–∞

### JWT —Ç–æ–∫–µ–Ω—ã

```python
# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ JWT —Ç–æ–∫–µ–Ω–∞
{
    "sub": "user_id",           # ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    "email": "user@example.com", # Email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    "subscription": "premium",   # –¢–∏–ø –ø–æ–¥–ø–∏—Å–∫–∏
    "exp": 1640995200,          # –í—Ä–µ–º—è –∏—Å—Ç–µ—á–µ–Ω–∏—è
    "iat": 1640908800,          # –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è
    "type": "access"            # –¢–∏–ø —Ç–æ–∫–µ–Ω–∞ (access/refresh)
}

# Refresh —Ç–æ–∫–µ–Ω (–±–æ–ª–µ–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏)
{
    "sub": "user_id",
    "type": "refresh",
    "exp": 1643587200  # 30 –¥–Ω–µ–π
}
```

### Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ—Ç Telegram Login Widget
def verify_telegram_auth(auth_data: dict) -> bool:
    bot_token = settings.TELEGRAM_BOT_TOKEN
    secret_key = hashlib.sha256(bot_token.encode()).digest()

    # –°–æ–∑–¥–∞–µ–º —Å—Ç—Ä–æ–∫—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
    check_string = "\n".join([
        f"{k}={v}" for k, v in sorted(auth_data.items())
        if k != "hash"
    ])

    # –í—ã—á–∏—Å–ª—è–µ–º HMAC
    expected_hash = hmac.new(
        secret_key,
        check_string.encode(),
        hashlib.sha256
    ).hexdigest()

    return auth_data.get("hash") == expected_hash
```

## ü§ñ –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### Telegram –±–æ—Ç

```python
# –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞
/start - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
/help - –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º
/register - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ
/filters - –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤
/add_filter - –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ñ–∏–ª—å—Ç—Ä
/edit_filter - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä
/delete_filter - –£–¥–∞–ª–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä
/subscription - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–ø–∏—Å–∫–µ
/settings - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
/pause - –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
/resume - –í–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```

### –§–æ—Ä–º–∞—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

```python
# –®–∞–±–ª–æ–Ω —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤–æ–º –æ–±—ä—è–≤–ª–µ–Ω–∏–∏
template = """
üè† <b>–ù–æ–≤–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ!</b>

üìç {address}
üí∞ <b>{price}‚Ç¨/–º–µ—Å—è—Ü</b>
üìê {area} –º¬≤ ‚Ä¢ üö™ {rooms} –∫–æ–º–Ω.
{additional_info}

üîç <i>–§–∏–ª—å—Ç—Ä: "{filter_name}"</i>

<a href="{url}">üëÄ –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</a>
<a href="{map_url}">üó∫ –ü–æ–∫–∞–∑–∞—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ</a>

/pause_{filter_id} - –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —ç—Ç–æ—Ç —Ñ–∏–ª—å—Ç—Ä
"""

# –ü—Ä–∏–º–µ—Ä –≥–æ—Ç–æ–≤–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
üè† –ù–æ–≤–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ!

üìç Via del Corso, 123, Roma
üí∞ 1,800‚Ç¨/–º–µ—Å—è—Ü
üìê 85 –º¬≤ ‚Ä¢ üö™ 3 –∫–æ–º–Ω. ‚Ä¢ üõè 2 —Å–ø.
ü™ë –ú–µ–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è ‚Ä¢ üêï –†–∞–∑—Ä–µ—à–µ–Ω—ã –ø–∏—Ç–æ–º—Ü—ã

üîç –§–∏–ª—å—Ç—Ä: "–ö–≤–∞—Ä—Ç–∏—Ä–∞ –≤ —Ü–µ–Ω—Ç—Ä–µ –†–∏–º–∞"

üëÄ –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ
üó∫ –ü–æ–∫–∞–∑–∞—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ

/pause_123 - –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —ç—Ç–æ—Ç —Ñ–∏–ª—å—Ç—Ä
```

### –õ–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

```python
# –ê–ª–≥–æ—Ä–∏—Ç–º –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
async def dispatch_notifications():
    # 1. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã
    active_filters = get_active_filters()

    for filter in active_filters:
        # 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        if not should_send_notification(filter):
            continue

        # 3. –ù–∞–π—Ç–∏ –Ω–æ–≤—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –ø–æ —Ñ–∏–ª—å—Ç—Ä—É
        new_listings = find_new_listings(filter)

        if not new_listings:
            continue

        # 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–∏–º–∏—Ç—ã –ø–æ–¥–ø–∏—Å–∫–∏
        if not check_notification_limits(filter.user):
            continue

        # 5. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        for listing in new_listings[:5]:  # –º–∞–∫—Å–∏–º—É–º 5 –∑–∞ —Ä–∞–∑
            await send_telegram_notification(
                filter.user.telegram_chat_id,
                listing,
                filter
            )

        # 6. –û–±–Ω–æ–≤–∏—Ç—å –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        update_last_notification_time(filter)
```

## üó∫Ô∏è –°–∏—Å—Ç–µ–º–∞ –∫–∞—Ä—Ç

### Leaflet –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

```typescript
// –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞—Ä—Ç—ã
interface MapViewProps {
  listings: Listing[];
  center?: [number, number];
  zoom?: number;
  onListingClick?: (listing: Listing) => void;
}

const MapView: React.FC<MapViewProps> = ({
  listings,
  center = [41.9028, 12.4964], // –†–∏–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  zoom = 11,
  onListingClick,
}) => {
  return (
    <MapContainer center={center} zoom={zoom} className="map-container">
      <TileLayer
        url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
        attribution="¬© OpenStreetMap contributors"
      />

      {listings.map((listing) => (
        <Marker
          key={listing.id}
          position={[listing.latitude, listing.longitude]}
          icon={getMarkerIcon(listing.source)}
          eventHandlers={{
            click: () => onListingClick?.(listing),
          }}
        >
          <Popup>
            <ListingPopup listing={listing} />
          </Popup>
        </Marker>
      ))}

      <MarkerClusterGroup>{/* –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –º–∞—Ä–∫–µ—Ä–æ–≤ */}</MarkerClusterGroup>
    </MapContainer>
  );
};
```

### –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è

```python
# –°–µ—Ä–≤–∏—Å –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
class GeoService:
    @staticmethod
    def extract_coordinates_from_listing(listing_html: str, source: str) -> Tuple[float, float]:
        """–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏–∑ HTML —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ–±—ä—è–≤–ª–µ–Ω–∏—è"""
        if source == "idealista":
            return IdealistaParser.extract_coordinates(listing_html)
        elif source == "immobiliare":
            return ImmobiliareParser.extract_coordinates(listing_html)
        return None, None

    @staticmethod
    def geocode_address(address: str, city: str) -> Tuple[float, float]:
        """–ì–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–π API"""
        # Nominatim OpenStreetMap API (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π)
        url = f"https://nominatim.openstreetmap.org/search"
        params = {
            "q": f"{address}, {city}, Italy",
            "format": "json",
            "limit": 1
        }
        response = requests.get(url, params=params)
        data = response.json()

        if data:
            return float(data[0]["lat"]), float(data[0]["lon"])
        return None, None

    @staticmethod
    def calculate_distance(lat1: float, lon1: float, lat2: float, lon2: float) -> float:
        """–†–∞—Å—á–µ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É –¥–≤—É–º—è —Ç–æ—á–∫–∞–º–∏ –≤ –∫–º"""
        from math import radians, sin, cos, sqrt, asin

        # –§–æ—Ä–º—É–ª–∞ –≥–∞–≤–µ—Ä—Å–∏–Ω—É—Å–∞
        R = 6371  # —Ä–∞–¥–∏—É—Å –ó–µ–º–ª–∏ –≤ –∫–º

        lat1, lon1, lat2, lon2 = map(radians, [lat1, lon1, lat2, lon2])
        dlat = lat2 - lat1
        dlon = lon2 - lon1

        a = sin(dlat/2)**2 + cos(lat1) * cos(lat2) * sin(dlon/2)**2
        c = 2 * asin(sqrt(a))

        return R * c
```

## ‚ö° –°–∏—Å—Ç–µ–º–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

### –î–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

```python
# –ì–∏–±—Ä–∏–¥–Ω—ã–π –∫–µ—à —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º fallback
class HybridCacheService:
    def __init__(self):
        self.redis_cache = RedisCacheService() if redis_available else None
        self.memory_cache = MemoryCacheService()
        self.ttl_minutes = settings.CACHE_TTL_MINUTES

    async def get(self, key: str) -> Optional[dict]:
        # –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–ª—É—á–∏—Ç—å –∏–∑ Redis
        if self.redis_cache:
            result = await self.redis_cache.get(key)
            if result:
                return result

        # Fallback –Ω–∞ memory –∫–µ—à
        return self.memory_cache.get(key)

    async def set(self, key: str, value: dict, ttl_minutes: int = None):
        ttl = ttl_minutes or self.ttl_minutes

        # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –æ–±–∞ –∫–µ—à–∞
        if self.redis_cache:
            await self.redis_cache.set(key, value, ttl)

        self.memory_cache.set(key, value, ttl)

    def generate_cache_key(self, filters: dict, max_pages: int) -> str:
        # –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ –∫–ª—é—á–∞
        normalized = {
            k: v for k, v in sorted(filters.items())
            if v is not None
        }
        normalized["max_pages"] = max_pages

        # MD5 —Ö–µ—à –¥–ª—è –∫–æ–º–ø–∞–∫—Ç–Ω–æ—Å—Ç–∏
        import hashlib
        import json
        key_string = json.dumps(normalized, sort_keys=True)
        return hashlib.md5(key_string.encode()).hexdigest()
```

### –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

```python
# –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω—è—Ö
class CacheStrategy:
    # –£—Ä–æ–≤–µ–Ω—å 1: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ (12 —á–∞—Å–æ–≤)
    SEARCH_RESULTS_TTL = 720  # –º–∏–Ω—É—Ç

    # –£—Ä–æ–≤–µ–Ω—å 2: –î–µ—Ç–∞–ª–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π (6 —á–∞—Å–æ–≤)
    LISTING_DETAILS_TTL = 360

    # –£—Ä–æ–≤–µ–Ω—å 3: –ì–µ–æ–¥–∞–Ω–Ω—ã–µ (24 —á–∞—Å–∞)
    GEO_DATA_TTL = 1440

    # –£—Ä–æ–≤–µ–Ω—å 4: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (1 —á–∞—Å)
    STATS_TTL = 60

    @classmethod
    def get_ttl_for_data_type(cls, data_type: str) -> int:
        return {
            "search_results": cls.SEARCH_RESULTS_TTL,
            "listing_details": cls.LISTING_DETAILS_TTL,
            "geo_data": cls.GEO_DATA_TTL,
            "stats": cls.STATS_TTL
        }.get(data_type, 60)  # –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1 —á–∞—Å
```

## üîß –ü–∞—Ä—Å–∏–Ω–≥ –∏ —Å–∫—Ä–∞–ø–∏–Ω–≥

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–∞—Ä—Å–µ—Ä–æ–≤

```python
# –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –ø–∞—Ä—Å–µ—Ä–∞
class BaseParser:
    def __init__(self, scraperapi_key: str):
        self.scraperapi_key = scraperapi_key
        self.session = aiohttp.ClientSession()

    async def scrape_listings(self, filters: dict, max_pages: int) -> List[dict]:
        raise NotImplementedError

    def parse_listing_container(self, container) -> dict:
        raise NotImplementedError

    async def get_page_content(self, url: str) -> str:
        params = {
            'api_key': self.scraperapi_key,
            'url': url,
            'country_code': 'it',
            'device_type': 'desktop',
            'premium': 'true'
        }

        async with self.session.get(
            'https://api.scraperapi.com',
            params=params,
            timeout=aiohttp.ClientTimeout(total=90)
        ) as response:
            return await response.text()

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è Idealista
class IdealistaParser(BaseParser):
    BASE_URL = "https://www.idealista.it"

    def build_search_url(self, filters: dict, page: int = 1) -> str:
        params = {
            'operation': 'rent',
            'propertyType': 'homes',
            'locationId': self.get_location_id(filters.get('city')),
            'priceMin': filters.get('min_price'),
            'priceMax': filters.get('max_price'),
            'rooms': filters.get('min_rooms'),
            'sort': 'publicationDate',
            'page': page
        }
        # –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è None –∑–Ω–∞—á–µ–Ω–∏–π –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ URL
        clean_params = {k: v for k, v in params.items() if v is not None}
        return f"{self.BASE_URL}/affitto-case?" + urlencode(clean_params)

    def parse_listing_container(self, container) -> dict:
        try:
            return {
                'external_id': self.extract_id(container),
                'title': container.select_one('a.item-link')?.get_text(strip=True),
                'price': self.extract_price(container),
                'rooms': self.extract_rooms(container),
                'area': self.extract_area(container),
                'address': self.extract_address(container),
                'images': self.extract_images(container),
                'url': self.extract_url(container),
                'source': 'idealista'
            }
        except Exception as e:
            logger.error(f"Error parsing Idealista listing: {e}")
            return None
```

### –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –ø–∞—Ä—Å–∏–Ω–≥–∞

```python
# –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –≤—Å–µ—Ö –ø–∞—Ä—Å–µ—Ä–æ–≤
class AsyncScrapingCoordinator:
    def __init__(self):
        self.parsers = {
            'idealista': IdealistaParser(settings.SCRAPERAPI_KEY),
            'immobiliare': ImmobiliareParser(settings.SCRAPERAPI_KEY),
            'subito': SubitoParser(settings.SCRAPERAPI_KEY)
        }
        self.cache = HybridCacheService()

    async def scrape_all_sources(self, filters: dict, max_pages: int = 5) -> List[dict]:
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∞
        cache_key = self.cache.generate_cache_key(filters, max_pages)
        cached_results = await self.cache.get(cache_key)

        if cached_results:
            logger.info(f"Returning cached results for key: {cache_key}")
            return cached_results['listings']

        # –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö –ø–∞—Ä—Å–µ—Ä–æ–≤
        tasks = []
        for source, parser in self.parsers.items():
            if settings.SOURCES_ENABLED.get(source, True):
                task = self.scrape_single_source(parser, filters, max_pages)
                tasks.append(task)

        # –û–∂–∏–¥–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        results = await asyncio.gather(*tasks, return_exceptions=True)

        # –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        all_listings = []
        for result in results:
            if isinstance(result, list):
                all_listings.extend(result)
            elif isinstance(result, Exception):
                logger.error(f"Parser error: {result}")

        # –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –ø–æ external_id + source
        unique_listings = self.deduplicate_listings(all_listings)

        # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫–µ—à
        cache_data = {
            'listings': unique_listings,
            'total_count': len(unique_listings),
            'scraped_at': datetime.utcnow().isoformat(),
            'sources': list(self.parsers.keys())
        }
        await self.cache.set(cache_key, cache_data)

        return unique_listings

    async def scrape_single_source(self, parser: BaseParser, filters: dict, max_pages: int) -> List[dict]:
        try:
            return await parser.scrape_listings(filters, max_pages)
        except Exception as e:
            logger.error(f"Error in {parser.__class__.__name__}: {e}")
            return []
```

## üöÄ –î–µ–ø–ª–æ–π –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```dockerfile
# Dockerfile –¥–ª—è production
FROM python:3.11-slim

# –°–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
RUN apt-get update && apt-get install -y \
    gcc \
    g++ \
    && rm -rf /var/lib/apt/lists/*

WORKDIR /app

# Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
COPY . .

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
RUN useradd --create-home --shell /bin/bash app \
    && chown -R app:app /app
USER app

# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
ENV PYTHONPATH=/app
ENV PYTHONDONTWRITEBYTECODE=1
ENV PYTHONUNBUFFERED=1

# Health check
HEALTHCHECK --interval=30s --timeout=30s --start-period=5s --retries=3 \
    CMD curl -f http://localhost:${PORT:-8000}/health || exit 1

# –ó–∞–ø—É—Å–∫
CMD ["sh", "-c", "alembic upgrade head && uvicorn main:app --host 0.0.0.0 --port ${PORT:-8000}"]
```

### Docker Compose –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```yaml
# docker-compose.yml
version: "3.8"

services:
  api:
    build: .
    ports:
      - "8000:8000"
    environment:
      - DATABASE_URL=postgresql://postgres:password@db:5432/ita_rent_bot
      - REDIS_URL=redis://redis:6379/0
      - ENVIRONMENT=development
    depends_on:
      - db
      - redis
    volumes:
      - .:/app
    command: uvicorn main:app --host 0.0.0.0 --port 8000 --reload

  db:
    image: postgres:15
    environment:
      POSTGRES_DB: ita_rent_bot
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: password
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    command: redis-server --appendonly yes

  frontend:
    build: ./frontend
    ports:
      - "5173:5173"
    volumes:
      - ./frontend:/app
      - /app/node_modules
    environment:
      - VITE_API_URL=http://localhost:8000
    command: npm run dev -- --host

volumes:
  postgres_data:
  redis_data:
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

```yaml
# docker-compose.prod.yml
version: "3.8"

services:
  api:
    build:
      context: .
      dockerfile: Dockerfile.prod
    environment:
      - DATABASE_URL=${DATABASE_URL}
      - REDIS_URL=${REDIS_URL}
      - SECRET_KEY=${SECRET_KEY}
      - ENVIRONMENT=production
    depends_on:
      - redis
    deploy:
      replicas: 2
      resources:
        limits:
          memory: 512M
        reservations:
          memory: 256M

  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
      - ./ssl:/etc/ssl:ro
    depends_on:
      - api

  redis:
    image: redis:7-alpine
    volumes:
      - redis_data:/data
    command: redis-server --appendonly yes --maxmemory 256mb --maxmemory-policy allkeys-lru

  telegram-bot:
    build: .
    environment:
      - DATABASE_URL=${DATABASE_URL}
      - TELEGRAM_BOT_TOKEN=${TELEGRAM_BOT_TOKEN}
    command: python run_telegram_bot.py
    depends_on:
      - api

  notification-dispatcher:
    build: .
    environment:
      - DATABASE_URL=${DATABASE_URL}
      - TELEGRAM_BOT_TOKEN=${TELEGRAM_BOT_TOKEN}
    command: python -m src.services.notification_dispatcher
    depends_on:
      - api

volumes:
  redis_data:
```

### –î–µ–ø–ª–æ–π –Ω–∞ –æ–±–ª–∞—á–Ω—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

```yaml
# Vercel (Frontend)
# vercel.json
{
  "version": 2,
  "builds": [
    {
      "src": "package.json",
      "use": "@vercel/static-build",
      "config": {
        "distDir": "dist"
      }
    }
  ],
  "routes": [
    {
      "src": "/(.*)",
      "dest": "/index.html"
    }
  ],
  "env": {
    "VITE_API_URL": "@api_url"
  }
}

# Railway (Backend)
# railway.toml
[build]
builder = "dockerfile"

[deploy]
startCommand = "alembic upgrade head && uvicorn main:app --host 0.0.0.0 --port $PORT"
healthcheckPath = "/health"
healthcheckTimeout = 300

[[services]]
name = "api"

[[services]]
name = "telegram-bot"
startCommand = "python run_telegram_bot.py"

[[services]]
name = "worker"
startCommand = "python -m src.services.notification_dispatcher"
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

```python
# –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
class MetricsCollector:
    def __init__(self):
        self.redis = redis.Redis.from_url(settings.REDIS_URL)

    def track_api_request(self, endpoint: str, status_code: int, response_time: float):
        """–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ API –∑–∞–ø—Ä–æ—Å–æ–≤"""
        key = f"metrics:api:{endpoint}:{status_code}"
        self.redis.incr(key)
        self.redis.expire(key, 86400)  # 24 —á–∞—Å–∞

        # –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞
        time_key = f"metrics:response_time:{endpoint}"
        self.redis.lpush(time_key, response_time)
        self.redis.ltrim(time_key, 0, 999)  # –ø–æ—Å–ª–µ–¥–Ω–∏–µ 1000 –∑–∞–ø—Ä–æ—Å–æ–≤

    def track_scraping_result(self, source: str, success: bool, listings_count: int):
        """–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞"""
        status = "success" if success else "error"
        key = f"metrics:scraping:{source}:{status}"
        self.redis.incr(key)

        if success:
            count_key = f"metrics:scraping:{source}:listings_count"
            self.redis.lpush(count_key, listings_count)
            self.redis.ltrim(count_key, 0, 99)  # –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 –∑–∞–ø—É—Å–∫–æ–≤

    def track_notification_sent(self, user_id: int, filter_id: int, success: bool):
        """–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π"""
        status = "sent" if success else "failed"
        key = f"metrics:notifications:{status}"
        self.redis.incr(key)

        # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
        user_key = f"metrics:notifications:user:{user_id}"
        self.redis.incr(user_key)
        self.redis.expire(user_key, 86400)

    def get_system_metrics(self) -> dict:
        """–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫"""
        import psutil

        return {
            "cpu_usage": psutil.cpu_percent(),
            "memory_usage": psutil.virtual_memory().percent,
            "disk_usage": psutil.disk_usage('/').percent,
            "active_connections": len(psutil.net_connections()),
            "uptime": time.time() - psutil.boot_time()
        }
```

### Health checks

```python
# –ü—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã
@app.get("/health")
async def health_check():
    checks = {
        "api": "healthy",
        "database": await check_database_health(),
        "redis": await check_redis_health(),
        "scraperapi": await check_scraperapi_health(),
        "telegram": await check_telegram_health()
    }

    overall_status = "healthy" if all(
        status == "healthy" for status in checks.values()
    ) else "unhealthy"

    return {
        "status": overall_status,
        "checks": checks,
        "timestamp": datetime.utcnow().isoformat(),
        "version": settings.APP_VERSION
    }

async def check_database_health() -> str:
    try:
        async with database.get_session() as db:
            result = await db.execute("SELECT 1")
            return "healthy"
    except Exception as e:
        logger.error(f"Database health check failed: {e}")
        return "unhealthy"

async def check_redis_health() -> str:
    try:
        redis_client = redis.Redis.from_url(settings.REDIS_URL)
        await redis_client.ping()
        return "healthy"
    except Exception as e:
        logger.error(f"Redis health check failed: {e}")
        return "unhealthy"
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

```python
# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
class SecuritySettings:
    # JWT
    SECRET_KEY: str = settings.SECRET_KEY
    ALGORITHM = "HS256"
    ACCESS_TOKEN_EXPIRE_MINUTES = 30
    REFRESH_TOKEN_EXPIRE_DAYS = 30

    # –ü–∞—Ä–æ–ª–∏
    PASSWORD_MIN_LENGTH = 8
    PASSWORD_REQUIRE_UPPERCASE = True
    PASSWORD_REQUIRE_NUMBERS = True
    PASSWORD_REQUIRE_SPECIAL = True

    # Rate limiting
    API_RATE_LIMIT = "100/minute"
    AUTH_RATE_LIMIT = "5/minute"
    SCRAPING_RATE_LIMIT = "10/hour"

    # CORS
    ALLOWED_ORIGINS = [
        "https://ita-rent-bot.vercel.app",
        "http://localhost:5173"
    ]

    # Headers
    SECURITY_HEADERS = {
        "X-Content-Type-Options": "nosniff",
        "X-Frame-Options": "DENY",
        "X-XSS-Protection": "1; mode=block",
        "Strict-Transport-Security": "max-age=31536000; includeSubDomains"
    }

# Middleware –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
@app.middleware("http")
async def security_middleware(request: Request, call_next):
    response = await call_next(request)

    # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ security headers
    for header, value in SecuritySettings.SECURITY_HEADERS.items():
        response.headers[header] = value

    return response

# –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–æ–ª–µ–π
def validate_password(password: str) -> bool:
    if len(password) < SecuritySettings.PASSWORD_MIN_LENGTH:
        raise ValueError("Password too short")

    if SecuritySettings.PASSWORD_REQUIRE_UPPERCASE and not re.search(r'[A-Z]', password):
        raise ValueError("Password must contain uppercase letter")

    if SecuritySettings.PASSWORD_REQUIRE_NUMBERS and not re.search(r'\d', password):
        raise ValueError("Password must contain number")

    if SecuritySettings.PASSWORD_REQUIRE_SPECIAL and not re.search(r'[!@#$%^&*(),.?":{}|<>]', password):
        raise ValueError("Password must contain special character")

    return True
```

### Rate limiting

```python
# –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤
from slowapi import Limiter, _rate_limit_exceeded_handler
from slowapi.util import get_remote_address
from slowapi.errors import RateLimitExceeded

limiter = Limiter(key_func=get_remote_address)
app.state.limiter = limiter
app.add_exception_handler(RateLimitExceeded, _rate_limit_exceeded_handler)

@app.post("/api/v1/auth/login")
@limiter.limit("5/minute")
async def login(request: Request, user_credentials: UserLogin):
    # –õ–æ–≥–∏–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
    pass

@app.get("/api/v1/listings")
@limiter.limit("100/minute")
async def search_listings(request: Request, filters: ListingSearch):
    # –õ–æ–≥–∏–∫–∞ –ø–æ–∏—Å–∫–∞
    pass
```

## üìà –ü–ª–∞–Ω—ã –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

### –≠—Ç–∞–ø—ã –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

**–≠—Ç–∞–ø 1: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**

- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è SQL –∑–∞–ø—Ä–æ—Å–æ–≤
- Connection pooling
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

**–≠—Ç–∞–ø 2: –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**

- Load balancer (Nginx)
- –ù–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ API
- Separate database –∏ Redis –∫–ª–∞—Å—Ç–µ—Ä
- CDN –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤

**–≠—Ç–∞–ø 3: –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**

- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
- Message Queue (RabbitMQ/Apache Kafka)
- API Gateway
- Service discovery

**–≠—Ç–∞–ø 4: –û–±–ª–∞—á–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**

- Kubernetes –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è
- Auto-scaling
- Managed databases
- Monitoring –∏ alerting

### –¶–µ–ª–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```python
# –¶–µ–ª–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –¥–ª—è production
class PerformanceTargets:
    # API Response –≤—Ä–µ–º–µ–Ω–∞
    API_RESPONSE_TIME_P95 = 1.0  # —Å–µ–∫—É–Ω–¥—ã
    API_RESPONSE_TIME_P99 = 2.0  # —Å–µ–∫—É–Ω–¥—ã

    # Throughput
    REQUESTS_PER_SECOND = 1000
    CONCURRENT_USERS = 10000

    # Availability
    UPTIME_TARGET = 99.9  # –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤

    # Database
    DB_QUERY_TIME_P95 = 0.1  # —Å–µ–∫—É–Ω–¥—ã
    DB_CONNECTION_POOL_SIZE = 20

    # Cache
    CACHE_HIT_RATE = 90  # –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤
    CACHE_RESPONSE_TIME = 0.01  # —Å–µ–∫—É–Ω–¥—ã

    # Scraping
    SCRAPING_SUCCESS_RATE = 95  # –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤
    SCRAPING_FREQUENCY = 3600  # —Å–µ–∫—É–Ω–¥—ã (1 —á–∞—Å)

    # Notifications
    NOTIFICATION_DELIVERY_RATE = 98  # –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤
    NOTIFICATION_LATENCY = 30  # —Å–µ–∫—É–Ω–¥
```

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: –Ø–Ω–≤–∞—Ä—å 2025  
**–í–µ—Ä—Å–∏—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏**: 1.0  
**–°—Ç–∞—Ç—É—Å**: –ì–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

–≠—Ç–∞ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ –∞—Å–ø–µ–∫—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞ –æ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –¥–æ –¥–µ–ø–ª–æ—è –∏ –º–æ–∂–µ—Ç —Å–ª—É–∂–∏—Ç—å –ø–æ–ª–Ω—ã–º —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã.
