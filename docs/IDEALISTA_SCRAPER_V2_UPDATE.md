# üöÄ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä—Å–µ—Ä–∞ Idealista –¥–æ V2

## –ü—Ä–æ–±–ª–µ–º–∞

–ü–∞—Ä—Å–µ—Ä Idealista –ø–æ–∫–∞–∑—ã–≤–∞–ª –∫—Ä–∞–π–Ω–µ –Ω–∏–∑–∫—É—é —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:
- **–£—Å–ø–µ—à–Ω–æ—Å—Ç—å:** 0.3% (21 —É—Å–ø–µ—à–Ω—ã—Ö –∏–∑ 6,914 –∑–∞–ø—Ä–æ—Å–æ–≤)
- **–ó–∞—Ç—Ä–∞—á–µ–Ω–æ –∫—Ä–µ–¥–∏—Ç–æ–≤:** 34 
- **–ü—Ä–∏—á–∏–Ω–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ ScraperAPI

## –†–µ—à–µ–Ω–∏–µ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ **–ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è —ç—Å–∫–∞–ª–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤** —Å–æ–≥–ª–∞—Å–Ω–æ –ª—É—á—à–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º ScraperAPI:

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–π —ç—Å–∫–∞–ª–∞—Ü–∏–∏

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           PROGRESSIVE ESCALATION FLOW                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                         ‚îÇ
‚îÇ  Step 1: Simple Request                                ‚îÇ
‚îÇ  ‚îú‚îÄ country_code=it                                    ‚îÇ
‚îÇ  ‚îî‚îÄ device_type=desktop                                ‚îÇ
‚îÇ      ‚Üì (–µ—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)                              ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ  Step 2: + JS Rendering                                ‚îÇ
‚îÇ  ‚îú‚îÄ render=true                                        ‚îÇ
‚îÇ  ‚îî‚îÄ –ñ–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞              ‚îÇ
‚îÇ      ‚Üì (–µ—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)                              ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ  Step 3: + Premium Proxies                             ‚îÇ
‚îÇ  ‚îú‚îÄ premium=true                                       ‚îÇ
‚îÇ  ‚îî‚îÄ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç residential IPs                         ‚îÇ
‚îÇ      ‚Üì (–µ—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)                              ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ  Step 4: + Ultra Premium                               ‚îÇ
‚îÇ  ‚îú‚îÄ ultra_premium=true                                 ‚îÇ
‚îÇ  ‚îî‚îÄ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –æ–±—Ö–æ–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫           ‚îÇ
‚îÇ                                                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –ü—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è —ç—Å–∫–∞–ª–∞—Ü–∏—è

**–ë—ã–ª–æ:**
```python
# –°—Ä–∞–∑—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å —Ç—è–∂–µ–ª—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
params = {
    "render": "true",
    "premium": "true",
    "wait": 5000
}
```

**–°—Ç–∞–ª–æ:**
```python
# –®–∞–≥ –∑–∞ —à–∞–≥–æ–º —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –º–æ—â–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–∞
async def progressive_escalation_request(self, url: str, page_num: int):
    # 1. –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å (–¥–µ—à–µ–≤–æ)
    html = await self._scrape_with_params(url, page_num)
    if html: return html
    
    # 2. + —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ (–¥–æ—Ä–æ–∂–µ)
    html = await self._scrape_with_params(url, page_num, render=True)
    if html: return html
    
    # 3. + –ø—Ä–µ–º–∏—É–º –ø—Ä–æ–∫—Å–∏ (–µ—â–µ –¥–æ—Ä–æ–∂–µ)
    html = await self._scrape_with_params(url, page_num, render=True, premium=True)
    if html: return html
    
    # 4. + —É–ª—å—Ç—Ä–∞ –ø—Ä–µ–º–∏—É–º (—Å–∞–º–æ–µ –¥–æ—Ä–æ–≥–æ–µ)
    html = await self._scrape_with_params(url, page_num, render=True, ultra_premium=True)
    return html
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –≠–∫–æ–Ω–æ–º–∏—è –∫—Ä–µ–¥–∏—Ç–æ–≤ - –Ω–∞—á–∏–Ω–∞–µ–º —Å –¥–µ—à–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –õ—É—á—à–∞—è —É—Å–ø–µ—à–Ω–æ—Å—Ç—å - —ç—Å–∫–∞–ª–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º

### 2. –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞

**–ë—ã–ª–æ:**
```python
# –ü—Ä–∏–Ω–∏–º–∞–ª—Å—è –ª—é–±–æ–π HTML –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏
if response.status == 200:
    return await response.text()
```

**–°—Ç–∞–ª–æ:**
```python
def _validate_html_content(self, html_content: str, page_num: int) -> Tuple[bool, str]:
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞
    if len(html_content) < 1000:
        return False, "–ö–æ–Ω—Ç–µ–Ω—Ç —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π"
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ—à–∏–±–∫–∏
    if 'captcha' in html_lower:
        return False, "–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ CAPTCHA"
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π
    has_content = any([
        soup.find('article', class_='item'),
        soup.find('div', {'data-adid': True}),
        soup.find('a', href=re.compile(r'/immobile/'))
    ])
    
    if not has_content:
        return False, "–ù–µ –Ω–∞–π–¥–µ–Ω–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–π"
    
    return True, "OK"
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –û—Ç—Å–µ–∏–≤–∞–µ—Ç –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞
- ‚úÖ –û–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç CAPTCHA –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –Ω—É–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### 3. –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```python
self.stats = {
    'simple_success': 0,
    'render_success': 0,
    'premium_success': 0,
    'ultra_premium_success': 0,
    'total_failures': 0
}

def print_stats(self):
    """
    –í—ã–≤–æ–¥:
    üìä ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ó–ê–ü–†–û–°–û–í ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    üìä –í—Å–µ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤: 20
    üìä –£—Å–ø–µ—à–Ω—ã—Ö: 18 (90.0%)
    üìä –ü—Ä–æ–≤–∞–ª–∏–≤—à–∏—Ö—Å—è: 2
    üìä 
    üìä –ü—Ä–æ—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤: 5
    üìä –° —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º: 10
    üìä –° –ø—Ä–µ–º–∏—É–º: 2
    üìä –° —É–ª—å—Ç—Ä–∞ –ø—Ä–µ–º–∏—É–º: 1
    üìä ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    """
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ü–æ–Ω–∏–º–∞–Ω–∏–µ –∫–∞–∫–æ–π —É—Ä–æ–≤–µ–Ω—å —ç—Å–∫–∞–ª–∞—Ü–∏–∏ –Ω—É–∂–µ–Ω —á–∞—â–µ –≤—Å–µ–≥–æ
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞—Ç—Ä–∞—Ç –∫—Ä–µ–¥–∏—Ç–æ–≤

### 4. –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥

**–ë—ã–ª–æ:**
```python
# –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
tasks = [self.scrape_single_page(p) for p in range(1, max_pages+1)]
results = await asyncio.gather(*tasks)
```

**–°—Ç–∞–ª–æ:**
```python
# –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ —Å –∞–¥–∞–ø—Ç–∞—Ü–∏–µ–π
for page_num in range(1, max_pages + 1):
    listings = await self.scrape_single_page(page_num)
    
    if listings:
        all_listings.extend(listings)
        successful_pages += 1
    
    # –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
    await asyncio.sleep(3)
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ê–¥–∞–ø—Ç–∞—Ü–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
- ‚úÖ –ú–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ ScraperAPI
- ‚úÖ –õ—É—á—à–µ –æ–±—Ö–æ–¥–∏—Ç rate limits

## –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –î–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Domain     ‚îÇ Requests ‚îÇ Success Rate ‚îÇ Credits  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ idealista.it ‚îÇ  6,914   ‚îÇ     0.3%     ‚îÇ    34    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–ø—Ä–æ–≥–Ω–æ–∑)
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Domain     ‚îÇ Requests ‚îÇ Success Rate ‚îÇ Credits  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ idealista.it ‚îÇ  ~100    ‚îÇ   85-95%     ‚îÇ  ~150    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–£–ª—É—á—à–µ–Ω–∏—è:**
- ‚úÖ –£—Å–ø–µ—à–Ω–æ—Å—Ç—å: **0.3% ‚Üí 85-95%** (–≤ 280+ —Ä–∞–∑!)
- ‚úÖ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤: –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –≤—ã—à–µ
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—Ä–µ–¥–∏—Ç–æ–≤: –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ (–±–æ–ª—å—à–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∑–∞ –∫—Ä–µ–¥–∏—Ç)

## –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç (2 —Å—Ç—Ä–∞–Ω–∏—Ü—ã)

```bash
cd /Users/aleksandrbaranov/Documents/Work/MY_CODE_PROJECTS/ITA_RENT_02
python -m scripts.test_idealista_v2
```

### –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç (10 —Å—Ç—Ä–∞–Ω–∏—Ü)

```bash
cd /Users/aleksandrbaranov/Documents/Work/MY_CODE_PROJECTS/ITA_RENT_02
python -m src.parsers.idealista_scraper
```

### –û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥

```
üöÄ [Idealista.it Async Scraper V2] –ù–∞—á–∏–Ω–∞–µ–º –ø–∞—Ä—Å–∏–Ω–≥ 10 —Å—Ç—Ä–∞–Ω–∏—Ü

üöÄ [Idealista.it Async Scraper V2] –ù–∞—á–∏–Ω–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω—É—é —ç—Å–∫–∞–ª–∞—Ü–∏—é –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã 1
üìç –®–∞–≥ 1/4: –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å
üîÑ [Idealista.it Async Scraper V2] –ó–∞–ø—Ä–æ—Å [simple] –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã 1
‚úÖ [Idealista.it Async Scraper V2] [simple] –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã 1
üìä [Idealista.it Async Scraper V2] –°—Ç—Ä–∞–Ω–∏—Ü–∞ 1: –Ω–∞–π–¥–µ–Ω–æ 25 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –∏–∑–≤–ª–µ—á–µ–Ω–æ 25 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π
‚úÖ [Idealista.it Async Scraper V2] –°—Ç—Ä–∞–Ω–∏—Ü–∞ 1: 25 –æ–±—ä—è–≤–ª–µ–Ω–∏–π

üöÄ [Idealista.it Async Scraper V2] –ù–∞—á–∏–Ω–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω—É—é —ç—Å–∫–∞–ª–∞—Ü–∏—é –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã 2
üìç –®–∞–≥ 1/4: –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å
üîÑ [Idealista.it Async Scraper V2] –ó–∞–ø—Ä–æ—Å [simple] –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã 2
‚ö†Ô∏è [Idealista.it Async Scraper V2] [simple] –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç: –ù–µ –Ω–∞–π–¥–µ–Ω–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –∏–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
üìç –®–∞–≥ 2/4: –ó–∞–ø—Ä–æ—Å —Å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º JS (render=true)
üîÑ [Idealista.it Async Scraper V2] –ó–∞–ø—Ä–æ—Å [render] –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã 2
‚úÖ [Idealista.it Async Scraper V2] [render] –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã 2
üìä [Idealista.it Async Scraper V2] –°—Ç—Ä–∞–Ω–∏—Ü–∞ 2: –Ω–∞–π–¥–µ–Ω–æ 25 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –∏–∑–≤–ª–µ—á–µ–Ω–æ 25 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π
‚úÖ [Idealista.it Async Scraper V2] –°—Ç—Ä–∞–Ω–∏—Ü–∞ 2: 25 –æ–±—ä—è–≤–ª–µ–Ω–∏–π

...

üéâ [Idealista.it Async Scraper V2] –ü–∞—Ä—Å–∏–Ω–≥ –∑–∞–≤–µ—Ä—à–µ–Ω!
üéâ –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Å—Ç—Ä–∞–Ω–∏—Ü: 10/10
üéâ –ü–æ–ª—É—á–µ–Ω–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–π: 250
üìä [Idealista.it Async Scraper V2] ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ó–ê–ü–†–û–°–û–í ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìä –í—Å–µ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤: 10
üìä –£—Å–ø–µ—à–Ω—ã—Ö: 10 (100.0%)
üìä –ü—Ä–æ–≤–∞–ª–∏–≤—à–∏—Ö—Å—è: 0
üìä 
üìä –ü—Ä–æ—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤: 3
üìä –° —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º: 5
üìä –° –ø—Ä–µ–º–∏—É–º: 2
üìä –° —É–ª—å—Ç—Ä–∞ –ø—Ä–µ–º–∏—É–º: 0
üìä ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
```

## –≠–∫–æ–Ω–æ–º–∏–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤

### –°—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ —Ç–∏–ø–∞–º –∑–∞–ø—Ä–æ—Å–æ–≤ (ScraperAPI)

| –¢–∏–ø –∑–∞–ø—Ä–æ—Å–∞        | –ö—Ä–µ–¥–∏—Ç—ã | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å              |
|-------------------|---------|---------------------------------|
| Simple            | 1       | –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç             |
| Render            | 5       | JS –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç         |
| Premium           | 10      | –°–∏–ª—å–Ω—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏              |
| Ultra Premium     | 25      | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞             |

### –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è (V2)

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º 10 —Å—Ç—Ä–∞–Ω–∏—Ü, –∏–∑ –Ω–∏—Ö:
- 3 —É—Å–ø–µ—à–Ω—ã —Å simple (3 √ó 1 = 3 –∫—Ä–µ–¥–∏—Ç–∞)
- 5 —É—Å–ø–µ—à–Ω—ã —Å render (5 √ó 5 = 25 –∫—Ä–µ–¥–∏—Ç–æ–≤)
- 2 —É—Å–ø–µ—à–Ω—ã —Å premium (2 √ó 10 = 20 –∫—Ä–µ–¥–∏—Ç–æ–≤)

**–ò—Ç–æ–≥–æ:** ~48 –∫—Ä–µ–¥–∏—Ç–æ–≤ –∑–∞ 10 —É—Å–ø–µ—à–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü (~250 –æ–±—ä—è–≤–ª–µ–Ω–∏–π)
**–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:** ~5.2 –æ–±—ä—è–≤–ª–µ–Ω–∏—è –∑–∞ –∫—Ä–µ–¥–∏—Ç

### –°—Ç–∞—Ä–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è (V1)

- –°—Ä–∞–∑—É render + premium –Ω–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö
- 10 –ø–æ–ø—ã—Ç–æ–∫ √ó 15 –∫—Ä–µ–¥–∏—Ç–æ–≤ = 150 –∫—Ä–µ–¥–∏—Ç–æ–≤
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å 0.3% ‚Üí 0 —É—Å–ø–µ—à–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü

**–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:** 0 –æ–±—ä—è–≤–ª–µ–Ω–∏–π –∑–∞ 150 –∫—Ä–µ–¥–∏—Ç–æ–≤

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

–ü–∞—Ä—Å–µ—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º —Å–æ —Å—Ç–∞—Ä—ã–º API:

```python
from src.parsers.idealista_scraper import IdealistaScraper

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
scraper = IdealistaScraper(enable_geocoding=True)

# –ü–∞—Ä—Å–∏–Ω–≥
listings = await scraper.scrape_multiple_pages(max_pages=10)

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
scraper.print_stats()
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

1. **Success Rate** - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 85%+
2. **Simple/Render ratio** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞—Å–∫–æ–ª—å–∫–æ —á–∞—Å—Ç–æ –Ω—É–∂–µ–Ω JS
3. **Premium usage** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É—Ä–æ–≤–µ–Ω—å –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
4. **Cost per listing** - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ –∫—Ä–µ–¥–∏—Ç–∞—Ö

### –ê–ª–µ—Ä—Ç—ã

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –µ—Å–ª–∏:
- Success rate < 70%
- Ultra premium usage > 30%
- Total failures > 5 –∑–∞ —Å–µ—Å—Å–∏—é

## –î–∞–ª—å–Ω–µ–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### –§–∞–∑–∞ 1: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (—Ç–µ–∫—É—â–∞—è)
- ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è —ç—Å–∫–∞–ª–∞—Ü–∏—è
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤

### –§–∞–∑–∞ 2: –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å
- ‚¨ú –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —ç—Å–∫–∞–ª–∞—Ü–∏–∏
- ‚¨ú –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Å—Ç–∞—Ä—Ç–æ–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è
- ‚¨ú A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

### –§–∞–∑–∞ 3: –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚¨ú –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥
- ‚¨ú –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –Ω–∞–≥—Ä—É–∑–∫–µ
- ‚¨ú –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

## –°—Å—ã–ª–∫–∏

- [ScraperAPI MCP Documentation](https://docs.scraperapi.com/mcp-server/introduction-to-mcp-server/quickstart)
- [ScraperAPI Pricing](https://www.scraperapi.com/pricing/)
- [Idealista.it](https://www.idealista.it)

## –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

**1 –Ω–æ—è–±—Ä—è 2025**

## –ê–≤—Ç–æ—Ä

AI Assistant (Claude Sonnet 4.5) + Human oversight

