# üì± –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Twilio WhatsApp –¥–ª—è ITA_RENT_BOT

–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ WhatsApp —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ Twilio - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö.

## üåü –ü–æ—á–µ–º—É Twilio?

### ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Twilio:

- **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞ 10 –º–∏–Ω—É—Ç
- **–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π Sandbox** - –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑ –∑–∞—Ç—Ä–∞—Ç
- **–û—Ç–ª–∏—á–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø—Ä–∏–º–µ—Ä–æ–≤ –∏ –≥–∞–π–¥–æ–≤
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –æ–¥–∏–Ω –∏–∑ –∫—Ä—É–ø–Ω–µ–π—à–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ —Å–≤—è–∑–∏ –≤ –º–∏—Ä–µ
- **–¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞** - –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
- **–ì–∏–±–∫–∏–µ —Ç–∞—Ä–∏—Ñ—ã** - –ø–ª–∞—Ç–∏—Ç–µ —Ç–æ–ª—å–∫–æ –∑–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- **–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ –ø–∞—Ä—Ç–Ω–µ—Ä—Å—Ç–≤–æ** - —Å Meta –¥–ª—è WhatsApp Business API

### üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å:

- **Sandbox —Ä–µ–∂–∏–º**: –ë–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **Production**: ~$0.005 –∑–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å—Ç—Ä–∞–Ω—ã)
- **–ë–µ–∑ –∞–±–æ–Ω–ø–ª–∞—Ç—ã** - –ø–ª–∞—Ç–∏—Ç–µ —Ç–æ–ª—å–∫–æ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –®–∞–≥ 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ Twilio (5 –º–∏–Ω—É—Ç)

1. **–û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç Twilio**:

   ```
   https://www.twilio.com/
   ```

2. **–ù–∞–∂–º–∏—Ç–µ "Sign up free"** (–∫—Ä–∞—Å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É)

3. **–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏**:

   - **Email**: –≤–∞—à —Ä–∞–±–æ—á–∏–π email
   - **Password**: –Ω–∞–¥–µ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å
   - **First Name**: –≤–∞—à–µ –∏–º—è
   - **Last Name**: –≤–∞—à–∞ —Ñ–∞–º–∏–ª–∏—è
   - **Company**: –º–æ–∂–µ—Ç–µ —É–∫–∞–∑–∞—Ç—å —Å–≤–æ–µ –∏–º—è –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

4. **–°–æ–≥–ª–∞—Å–∏—Ç–µ—Å—å —Å —É—Å–ª–æ–≤–∏—è–º–∏** –∏ –Ω–∞–∂–º–∏—Ç–µ "Start your free trial"

5. **–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞**:

   - –í–≤–µ–¥–∏—Ç–µ –≤–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
   - –ü–æ–ª—É—á–∏—Ç–µ –∏ –≤–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∏–∑ SMS
   - –ù–∞–∂–º–∏—Ç–µ "Verify"

6. **–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–¥—É–∫—Ç—ã**:
   - –û—Ç–º–µ—Ç—å—Ç–µ **"Messaging"** ‚úÖ
   - –û—Ç–º–µ—Ç—å—Ç–µ **"WhatsApp"** ‚úÖ
   - –ù–∞–∂–º–∏—Ç–µ "Get started"

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ WhatsApp Sandbox (3 –º–∏–Ω—É—Ç—ã)

1. **–í –∫–æ–Ω—Å–æ–ª–∏ Twilio –Ω–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª Messaging**:

   ```
   –õ–µ–≤–æ–µ –º–µ–Ω—é ‚Üí Messaging ‚Üí Try it out ‚Üí Send a WhatsApp message
   ```

2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ WhatsApp Sandbox**:

   - –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª "WhatsApp Sandbox"
   - –£–≤–∏–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–∏–ø–∞: **+1 415 523 8886**
   - –£–≤–∏–¥–∏—Ç–µ –∫–æ–¥ —Ç–∏–ø–∞: **join select-thumb**

3. **–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ Sandbox**:
   - –û—Ç–∫—Ä–æ–π—Ç–µ WhatsApp –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —á–∞—Ç —Å –Ω–æ–º–µ—Ä–æ–º **+1 415 523 8886**
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: **join select-thumb** (–≤–∞—à –∫–æ–¥ –º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è!)
   - –ü–æ–ª—É—á–∏—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏

### –®–∞–≥ 3: –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π (2 –º–∏–Ω—É—Ç—ã)

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–∫–∫–∞—É–Ω—Ç–∞**:

   ```
   –õ–µ–≤–æ–µ –º–µ–Ω—é ‚Üí Account ‚Üí API keys & tokens
   ```

2. **–ù–∞–π–¥–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:

   - **Account SID**: —Å—Ç—Ä–æ–∫–∞ —Ç–∏–ø–∞ `AC1234567890abcdef1234567890abcdef`
   - **Auth Token**: –Ω–∞–∂–º–∏—Ç–µ "Show" —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å

3. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ**:
   - Account SID ‚Üí —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤ –±–ª–æ–∫–Ω–æ—Ç
   - Auth Token ‚Üí —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤ –±–ª–æ–∫–Ω–æ—Ç

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env —Ñ–∞–π–ª–∞

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à .env —Ñ–∞–π–ª** –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π

2. **–î–æ–±–∞–≤—å—Ç–µ Twilio –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**:

   ```bash
   # WhatsApp Twilio –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
   WHATSAPP_ENABLED=true
   WHATSAPP_API_URL=https://api.twilio.com/2010-04-01/Accounts/YOUR_ACCOUNT_SID/Messages.json
   WHATSAPP_API_TOKEN=–≤–∞—à_auth_token
   WHATSAPP_PHONE_NUMBER_ID=whatsapp:+14155238886
   WHATSAPP_BUSINESS_ACCOUNT_ID=–≤–∞—à_account_sid
   ```

3. **–ó–∞–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è**:

   - `YOUR_ACCOUNT_SID` ‚Üí –≤–∞—à Account SID
   - `–≤–∞—à_auth_token` ‚Üí –≤–∞—à Auth Token
   - `–≤–∞—à_account_sid` ‚Üí —Ç–æ—Ç –∂–µ Account SID

4. **–ü—Ä–∏–º–µ—Ä –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–≥–æ .env**:
   ```bash
   WHATSAPP_ENABLED=true
   WHATSAPP_API_URL=https://api.twilio.com/2010-04-01/Accounts/AC1234567890abcdef1234567890abcdef/Messages.json
   WHATSAPP_API_TOKEN=abcdef1234567890abcdef1234567890
   WHATSAPP_PHONE_NUMBER_ID=whatsapp:+14155238886
   WHATSAPP_BUSINESS_ACCOUNT_ID=AC1234567890abcdef1234567890abcdef
   ```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç —á–µ—Ä–µ–∑ –Ω–∞—à —Å–∫—Ä–∏–ø—Ç:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
python test_twilio_whatsapp.py
```

–°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç:

- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Twilio API
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫—É —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ –†–∞–±–æ—Ç—É —á–µ—Ä–µ–∑ –Ω–∞—à WhatsApp —Å–µ—Ä–≤–∏—Å

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ cURL:

```bash
# –ó–∞–º–µ–Ω–∏—Ç–µ YOUR_ACCOUNT_SID –∏ YOUR_AUTH_TOKEN –Ω–∞ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ
curl -X POST "https://api.twilio.com/2010-04-01/Accounts/YOUR_ACCOUNT_SID/Messages.json" \
--data-urlencode "From=whatsapp:+14155238886" \
--data-urlencode "To=whatsapp:+393401234567" \
--data-urlencode "Body=–¢–µ—Å—Ç WhatsApp –æ—Ç ITA_RENT_BOT!" \
-u YOUR_ACCOUNT_SID:YOUR_AUTH_TOKEN
```

## üöÄ –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—â—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é
python test_whatsapp_integration.py

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ–ª—å–∫–æ Twilio
python test_twilio_whatsapp.py
```

### 2. –ó–∞–ø—É—Å–∫ worker'–∞:

```bash
# –í —Ä–µ–∂–∏–º–µ –æ—Ç–ª–∞–¥–∫–∏
DEBUG_NOTIFICATIONS=true python run_whatsapp_worker.py

# –í –æ–±—ã—á–Ω–æ–º —Ä–µ–∂–∏–º–µ
python run_whatsapp_worker.py
```

### 3. –ó–∞–ø—É—Å–∫ API —Å–µ—Ä–≤–µ—Ä–∞:

```bash
# –í —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
python -m uvicorn src.main:app --reload

# –í production
python -m uvicorn src.main:app --host 0.0.0.0 --port 8000
```

## üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ API

### –ü—Ä–∏–≤—è–∑–∫–∞ WhatsApp –Ω–æ–º–µ—Ä–∞:

```bash
curl -X POST "http://localhost:8000/api/v1/whatsapp/link" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "phone_number": "+393401234567"
  }'
```

### –¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:

```bash
curl -X POST "http://localhost:8000/api/v1/whatsapp/test" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "phone_number": "+393401234567"
  }'
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:

```bash
curl -X GET "http://localhost:8000/api/v1/whatsapp/status" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Production

### –ü–µ—Ä–µ—Ö–æ–¥ —Å Sandbox –Ω–∞ Production:

1. **–í –∫–æ–Ω—Å–æ–ª–∏ Twilio –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤**:

   ```
   Messaging ‚Üí Senders ‚Üí WhatsApp senders
   ```

2. **–ù–∞–∂–º–∏—Ç–µ "Request Access"** –¥–ª—è production –¥–æ—Å—Ç—É–ø–∞

3. **–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–∞—è–≤–∫—É**:

   - –ù–∞–∑–≤–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å–∞
   - –û–ø–∏—Å–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - –û–∂–∏–¥–∞–µ–º—ã–π –æ–±—ä–µ–º —Å–æ–æ–±—â–µ–Ω–∏–π

4. **–î–æ–∂–¥–∏—Ç–µ—Å—å –æ–¥–æ–±—Ä–µ–Ω–∏—è** (–æ–±—ã—á–Ω–æ 1-3 –¥–Ω—è)

5. **–û–±–Ω–æ–≤–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**:
   - –ü–æ–ª—É—á–∏—Ç–µ production –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
   - –û–±–Ω–æ–≤–∏—Ç–µ `WHATSAPP_PHONE_NUMBER_ID` –≤ .env

### Production –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

```bash
# –î–æ–±–∞–≤—å—Ç–µ –≤ .env –¥–ª—è production
WHATSAPP_WEBHOOK_VERIFY_TOKEN=–≤–∞—à_—Å–ª—É—á–∞–π–Ω—ã–π_—Ç–æ–∫–µ–Ω_32_—Å–∏–º–≤–æ–ª–∞
DEBUG_NOTIFICATIONS=false
WHATSAPP_NOTIFICATION_INTERVAL_SECONDS=1800
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏ Twilio:

1. **–í –∫–æ–Ω—Å–æ–ª–∏ Twilio**:

   ```
   Monitor ‚Üí Logs ‚Üí Programmable Messaging
   ```

2. **–§–∏–ª—å—Ç—Ä—ã –¥–ª—è –ø–æ–∏—Å–∫–∞**:
   - –ü–æ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏
   - –ü–æ —Å—Ç–∞—Ç—É—Å—É –¥–æ—Å—Ç–∞–≤–∫–∏
   - –ü–æ –Ω–æ–º–µ—Ä—É –ø–æ–ª—É—á–∞—Ç–µ–ª—è

### –°—Ç–∞—Ç—É—Å—ã —Å–æ–æ–±—â–µ–Ω–∏–π Twilio:

- **queued** - —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –æ—á–µ—Ä–µ–¥–∏
- **sending** - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- **sent** - –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
- **delivered** - –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ
- **undelivered** - –Ω–µ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ
- **failed** - –æ—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏

### –û—Ç–ª–∞–¥–∫–∞ —á–µ—Ä–µ–∑ –ª–æ–≥–∏:

```bash
# –ó–∞–ø—É—Å–∫ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º–∏ –ª–æ–≥–∞–º–∏
DEBUG_NOTIFICATIONS=true python run_whatsapp_worker.py

# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö
grep "ERROR" logs/whatsapp_worker.log

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f logs/whatsapp_worker.log | grep "Twilio"
```

## üí∏ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–∞–º–∏

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–∏–º–∏—Ç–æ–≤ –≤ Twilio:

1. **Billing ‚Üí Notifications & Limits**
2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Monthly Spending Limit**
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏**

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞—Å—Ö–æ–¥–æ–≤:

- **–ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ –Ω–µ —á–∞—â–µ —á–µ–º —Ä–∞–∑ –≤ —á–∞—Å
- **–§–∏–ª—å—Ç—Ä—É–π—Ç–µ –¥—É–±–ª–∏–∫–∞—Ç—ã** - –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã** - –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–∞–∑—É–º–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## üõ†Ô∏è –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏:

#### 1. "Authenticate" error (401)

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å Account SID –∏ Auth Token
echo $WHATSAPP_BUSINESS_ACCOUNT_ID
echo $WHATSAPP_API_TOKEN
```

#### 2. "From number not verified" error

- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Sandbox –Ω–æ–º–µ—Ä: `whatsapp:+14155238886`
- –ò–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ production –Ω–æ–º–µ—Ä

#### 3. "To number not in sandbox" error

- –î–æ–±–∞–≤—å—Ç–µ –ø–æ–ª—É—á–∞—Ç–µ–ª—è –≤ Sandbox —á–µ—Ä–µ–∑ join –∫–æ–¥
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ production –≤–µ—Ä—Å–∏—é

#### 4. "Message body too long" error

- WhatsApp –ª–∏–º–∏—Ç: 4096 —Å–∏–º–≤–æ–ª–æ–≤
- –°–æ–∫—Ä–∞—Ç–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–ª–∏ —Ä–∞–∑–±–µ–π—Ç–µ –Ω–∞ —á–∞—Å—Ç–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:

```bash
# –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API
curl -u YOUR_ACCOUNT_SID:YOUR_AUTH_TOKEN \
  "https://api.twilio.com/2010-04-01/Accounts/YOUR_ACCOUNT_SID.json"
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –ö–æ–Ω—Ç–∞–∫—Ç—ã Twilio:

- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: https://www.twilio.com/docs/whatsapp
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞**: https://support.twilio.com/
- **–°—Ç–∞—Ç—É—Å—ã**: https://status.twilio.com/

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:

- **Console**: https://console.twilio.com/
- **WhatsApp Sandbox**: https://console.twilio.com/us1/develop/sms/try-it-out/whatsapp-learn
- **Billing**: https://console.twilio.com/us1/billing

## üéâ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Twilio:

1. ‚úÖ **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –æ—Ç–ø—Ä–∞–≤–∫—É** —á–µ—Ä–µ–∑ `test_twilio_whatsapp.py`
2. ‚úÖ **–ó–∞–ø—É—Å—Ç–∏—Ç–µ worker** `python run_whatsapp_worker.py`
3. ‚úÖ **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
4. ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏** –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
5. ‚úÖ **–ü–ª–∞–Ω–∏—Ä—É–π—Ç–µ –ø–µ—Ä–µ—Ö–æ–¥** –Ω–∞ production –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

**–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! WhatsApp —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ Twilio –≥–æ—Ç–æ–≤—ã –∫ —Ä–∞–±–æ—Ç–µ! üéØ**
