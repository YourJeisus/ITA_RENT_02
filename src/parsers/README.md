# üè† –ü–∞—Ä—Å–µ—Ä—ã –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏

–≠—Ç–∞ –ø–∞–ø–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –ø–∞—Ä—Å–µ—Ä—ã –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Å —Å–∞–π—Ç–æ–≤ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
src/parsers/
‚îú‚îÄ‚îÄ __init__.py              # –≠–∫—Å–ø–æ—Ä—Ç –ø–∞—Ä—Å–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ base_parser.py           # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä—Å–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ immobiliare_parser.py    # –ü–∞—Ä—Å–µ—Ä –¥–ª—è Immobiliare.it
‚îú‚îÄ‚îÄ run_scraping.py          # üöÄ –°–ö–†–ò–ü–¢ –î–õ–Ø –ó–ê–ü–£–°–ö–ê –ü–ê–†–°–ò–ù–ì–ê
‚îî‚îÄ‚îÄ README.md               # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ó–∞–ø—É—Å–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞

**–ò–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞:**

```bash
# –° –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º (–ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
python src/parsers/run_scraping.py

# –ë–µ–∑ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å)
python src/parsers/run_scraping.py --no-geo
```

**–ò–∑ –ø–∞–ø–∫–∏ –ø–∞—Ä—Å–µ—Ä–æ–≤:**

```bash
cd src/parsers
python run_scraping.py          # –° –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
python run_scraping.py --no-geo # –ë–µ–∑ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
```

**–¢–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**

```bash
python src/parsers/test_performance.py
```

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –ø–∞—Ä—Å–µ—Ä

1. **üéØ –ü–∞—Ä—Å–∏—Ç**: `https://www.immobiliare.it/affitto-case/roma/`
2. **üìã –ò–∑–≤–ª–µ–∫–∞–µ—Ç**: –í–°–ï –æ–±—ä—è–≤–ª–µ–Ω–∏—è (–±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–æ–≤)
3. **‚ö° –†–µ–∂–∏–º**: –ê–°–ò–ù–•–†–û–ù–ù–´–ô (–≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)
4. **üì∏ –°–æ–±–∏—Ä–∞–µ—Ç**: –í–°–ï —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
5. **üó∫Ô∏è –ü–æ–ª—É—á–∞–µ—Ç**: –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏–∑ JSON –∏–ª–∏ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
6. **üíæ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç**: –í—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ PostgreSQL –±–∞–∑—É

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- ‚úÖ ScraperAPI –∫–ª—é—á –≤ `.env` —Ñ–∞–π–ª–µ
- ‚úÖ PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- ‚úÖ –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (`pip install -r requirements.txt`)

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### ImmobiliareParser

- **–ú–µ—Ç–æ–¥**: `scrape_all_listings(max_pages=10)`
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è**: ScraperAPI —Å JS —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º + aiohttp
- **–†–µ–∂–∏–º**: ‚ö° **–ê–°–ò–ù–•–†–û–ù–ù–´–ô** (–≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)
- **–î–∞–Ω–Ω—ã–µ**: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑ `__NEXT_DATA__` JSON
- **–§–æ—Ç–æ**: –í—Å–µ —Ä–∞–∑–º–µ—Ä—ã (large, medium, small)
- **–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑ JSON
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**:
  - –° –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º: ~4.65 –æ–±—ä—è–≤–ª–µ–Ω–∏–π/—Å–µ–∫ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
  - –ë–µ–∑ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è: ~4.83 –æ–±—ä—è–≤–ª–µ–Ω–∏–π/—Å–µ–∫ (—É—Å–∫–æ—Ä–µ–Ω–∏–µ 4%)
  - –°—Ä–µ–¥–Ω–µ–µ —Ñ–æ—Ç–æ –Ω–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ: ~25 —à—Ç.

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–æ–¥–µ

```python
from src.parsers.immobiliare_parser import ImmobiliareParser

# –°–æ–∑–¥–∞–µ–º –ø–∞—Ä—Å–µ—Ä
parser = ImmobiliareParser()

# –ü–∞—Ä—Å–∏–º 5 —Å—Ç—Ä–∞–Ω–∏—Ü
listings = await parser.scrape_all_listings(max_pages=5)

# –ü–æ–ª—É—á–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
print(f"–ù–∞–π–¥–µ–Ω–æ: {len(listings)} –æ–±—ä—è–≤–ª–µ–Ω–∏–π")
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞

–ö–∞–∂–¥–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç:

```python
{
    'external_id': '123456789',
    'source': 'immobiliare',
    'title': 'Appartamento - 3 locali',
    'price': 1500,
    'rooms': 3,
    'area': 85,
    'address': 'Via del Corso, 123',
    'city': 'Roma',
    'latitude': 41.9028,
    'longitude': 12.4964,
    'images': [
        'https://pwm.im-cdn.it/image/123/large.jpg',
        'https://pwm.im-cdn.it/image/124/large.jpg',
        # ... –¥–æ 30+ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
    ],
    'url': 'https://www.immobiliare.it/annunci/123456789/',
    # ... –∏ –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
}
```

## üõ†Ô∏è –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–∞—Ä—Å–µ—Ä–æ–≤

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ñ–∞–π–ª `new_site_parser.py`
2. –ù–∞—Å–ª–µ–¥—É–π—Ç–µ—Å—å –æ—Ç `BaseParser`
3. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã
4. –î–æ–±–∞–≤—å—Ç–µ —ç–∫—Å–ø–æ—Ä—Ç –≤ `__init__.py`
5. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –≤ `ScrapingService`

## üìù –õ–æ–≥–∏

–ü–∞—Ä—Å–µ—Ä —Å–æ–∑–¥–∞–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏:

- ‚úÖ –£—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- ‚ùå –û—à–∏–±–∫–∏ —Å –¥–µ—Ç–∞–ª—è–º–∏

## üîç –û—Ç–ª–∞–¥–∫–∞

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã:

```python
# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å (–±–µ–∑ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç)
parser = ImmobiliareParser(enable_geocoding=False)
listings = await parser.scrape_all_listings(max_pages=1)

# –ü–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (—Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏)
parser = ImmobiliareParser(enable_geocoding=True)
listings = await parser.scrape_all_listings(max_pages=1)
```

## ‚ö° –†–µ–∂–∏–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### üöÄ –ë—ã—Å—Ç—Ä—ã–π —Ä–µ–∂–∏–º (–±–µ–∑ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è)

```bash
python src/parsers/run_scraping.py --no-geo
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

- ‚úÖ –£—Å–∫–æ—Ä–µ–Ω–∏–µ –Ω–∞ ~4%
- ‚úÖ –ú–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –≤–Ω–µ—à–Ω–∏–µ API
- ‚úÖ –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**

- ‚ùå –ù–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏ –∞–¥—Ä–µ—Å–æ–≤
- ‚ùå –ù—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚ùå –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤—ã–≥–æ–¥–∞ (–≤—Å–µ–≥–æ 4%)

### üó∫Ô∏è –ü–æ–ª–Ω—ã–π —Ä–µ–∂–∏–º (—Å –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º)

```bash
python src/parsers/run_scraping.py
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

- ‚úÖ –ü–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å—Ä–∞–∑—É
- ‚úÖ –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏–∑ JSON + –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ì–æ—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–∞—Ä—Ç

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**

- ‚ùå –ú–µ–¥–ª–µ–Ω–Ω–µ–µ –Ω–∞ 14-22%
- ‚ùå –ë–æ–ª—å—à–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –≤–Ω–µ—à–Ω–∏–º API

### üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–¢–µ—Å—Ç –Ω–∞ 10 —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö (250 –æ–±—ä—è–≤–ª–µ–Ω–∏–π):**

| –†–µ–∂–∏–º   | –í—Ä–µ–º—è     | –°–∫–æ—Ä–æ—Å—Ç—å    | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã | –ê–¥—Ä–µ—Å–∞  | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è               |
| ------- | --------- | ----------- | ---------- | ------- | -------------------------- |
| –ü–æ–ª–Ω—ã–π  | 53.73 —Å–µ–∫ | 4.65 –æ–±/—Å–µ–∫ | ‚úÖ 100%    | ‚úÖ 100% | ‚≠ê **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è**       |
| –ë—ã—Å—Ç—Ä—ã–π | 51.71 —Å–µ–∫ | 4.83 –æ–±/—Å–µ–∫ | ‚ùå 0%      | ‚ùå 0%   | –¢–æ–ª—å–∫–æ –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ |

**–í—ã–≤–æ–¥:** –†–∞–∑–Ω–∏—Ü–∞ –≤—Å–µ–≥–æ 4% - –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å!
